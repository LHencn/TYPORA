# LINUX基础

源：应用市场

1. `sudo apt-get update` 更新`/etc/apt/sources.list`软件列表
2. `sudo apt-get upgrade` 更新软件
3. `sudo !!` 刚才执行的命令没有管理员权限，该命令为加上管理员权限
4. `apt-cache search` 
5. `apt-get intall` 安装软件包
6. `pip` 
7. `dpkg` 
8. `nmon` 

常用命令

### 操作系统概念：（2/5）

#### 体系结构：

1. 计算器：CPU
2. 控制器：CPU
3. 存储器：内部存储（内存） 寻址空间（MP3） 国家：每个国家做成一个单元，国家中的各个市为每个区
4. 输入设备：鼠标、键盘
5. 输出设备：显示器、音频等

操作系统：带有很多外围程序的系统，笔记本硬件--win7（带有计算器、画图工具），library（lib库）（Windows中有类似的库dll，linux中有`.so:shared object`）

office：word、ppt、表格等均需采用打印功能，此时可以采用系统调用调用官方已有的功能`system call` （该即直接作用到内核上，效率更高），也可直接作用到硬件上，功能均自己写。

应用程序可以随系统一起启动，也可以不随系统一起启动，则为交互式应用程序（用户使用时根据需要启动程序）

#### 操作系统历史：

1. 1969年，MIT和BELL实验室开发出MULTICS（采用汇编语言）

   1. ken开发出小游戏（类似与雷霆战机的太空遨游）
   2. ken：PDP-11 PDP-7
   3. c语言重新开发MULTICS
   4. unics---unix

2. 1977年，BSD：openbsd，freebsd netbsd

3. 1984年，谭宁邦教授，开发出minix，教学使用

4. 1984年，GNU： GNU is not unix (GCC/BASH SHELL)史特曼教授自己开发的供他人使用

5. GPL：

   1. 取得软件和源码，任何人可以根据自己的需求自由的获取软件和源码
   2. 复制：复制该软件（衍生）
   3. 修改：该源码可以自行修改（衍生）
   4. 再发行：把修改后的代码进行二次发行
   5. 修改授权：修改后的软件不可进行商业用途
   6. LGPL：基于某个内核平台开发的软件可以进行销售

6. Linux版本号（内核版本号）：三部分组成：

   A.B.C

   A：主版本号

   B：次版本号（奇数：开发版本  	偶数：发行版本）

   C：修订版本号（修订次数）

   内核版本：3.6.28  3是主版本号  6：次版本号   28修订了28次

   开发---内测（修复漏洞，开发新功能）---公测---正式版本生成（正式上线）

7. `lhc@lhc-PC: ~$  ` 

   1. lhc为当前登录的用户名
   2. lhc-PC为主机名
   3. $为当前登录用户是普通用户
   4. ～代表当前用户所处的目录（～代表当前用户宿主目录）

#### linux的设计理念(2/6)

1. ##### 远程连接linux系统：`xshell、CRT` 的使用

   1. `ifconfig` 查看IP地址
   2. `xshell` 中输入`ssh` 192.168.10.147

2. ##### shell的作用

   1. shell：人机交互接口
   2. 类似于图形用户界面的应用鼠标双击
   3. shell中输入命令，shell把命令传递给内核，内核把命令结果反馈给shell，人从shell中读取结果
   4. linux支持的shell，bash（默认的shell）、 ksh 、 csh
   5. linux图形界面
      1. GNOME：linux默认的图形界面，c语言开发
      2. KDE：C++开发
      3. xface：简化的图形界面

3. ##### 内核的作用

   1. 进程管理：要执行的任务（例：打开QQ，就是打开一个QQ进程）
   2. 内存管理：
   3. 文件系统：存储设备上存储数据的方式方法：windows：NTFS/FAT32、Linux：ext3、ext4、xfs等
   4. 网络功能：管理IP地址信息等
   5. 硬件驱动：
   6. 安全功能：
   7. linux是一个轻巧、稳定的系统

4. ##### linux设计思想

   1. 由很多的小程序组成，每个小程序完成单一的功能，实现复杂的任务（http服务需要安装很多小组件）

   2. 一切皆文件：所有的外围设备（硬件）或者其他的小程序

   3. 尽量避免捕获用户接口，用户不和内核直接接触

      用户->shell->软件->lib->kernal->硬件（cpu，内存，磁盘）

   4. 配置文件保存为纯文本格式（可以用文本编辑器编辑）

5. ##### linux终端：多用户多任务系统，可同时多个用户使用同一个系统

   1. 默认总共有6个终端：ctrl+alt+F1-F6，虚拟终端
   2. Linux界面：
      1. GUI：graphical user interface：图形用户接口（图形界面）Ctrl+alt+F7
      2. CLI：command line interface：命令行接口（字符界面）

6. ##### 命令格式等内容：

   1. 命令提示符（prompt）：`lhc@lhc-PC ~$`
   2. 退出当前终端`exit`
   3. Linux使用凭证：类似于指纹/刷脸等，用户名和密码（用户获取资源权限的凭证）
   4. root：linux默认管理员用户名
   5. 切换用户：`su（switch user）` 
      1. 当root用户切换到普通用户时，不需提供密码，而普通用户切换到root用户则需要提供密码
   6. 退出当前用户：`exit`
   7. 命令格式
      1. `命令字  【选项】  【参数】`   `ls -l`
      2. 选项：修正命令的执行方式（实现特定功能）
      3. 短选项：用`-`引导，多个短选项可以组合
      4. 长选项：用`--` 引导，后是一个单词，多个长选项不可组合 
      5. 参数：命令作用的对象
      6. 【】：可有可无

##### Linux如何高效获取命令信息

1. ###### 如何区分root用户和普通用户

   1. 系统可以区分用户的UID，不识别用户名
   2. 3A认证：
      1. 认证机制：authentication：
         1. 密码认证：
            1. 符合复杂性要求：数字，小写字母，大写字母，特殊符号至少三种
            2. 密码长度：至少7位
            3. 不要使用比较易记住的（使用随机字符）
            4. 定期更改密码
            5. 重复密码的时间要长
      2. 授权机制：authorization ：授权
      3. 审计机制：audition（日志）：监督

2. ###### Linux登录信息：`/etc/issue`

3. ###### Linux命令分类：

   1. 内部命令：shell自带的命令
   2. 外部命令：在Linux文件系统中存在一个应用程序

4. ###### `type` ：查看Linux命令类型

   1. `【command】is a shell builtin:buildin` 关键字说明该命令为内部命令
   2. `mkdir is /bin/` mkdir：有路径显示（外部命令）

5. ###### 路径：

   1. 绝对路径：从根（/）开始的路径是绝对路径，linux系统中只有一个根
   2. 相对路径：当前所处的工作目录为参照点，`.` 代表当前路径，`..`代表上一级路径，`～`代表宿主目录

6. ###### `ls（list） ` ：列出目录

   1. `-l(--long)`:以长格式显示
      1. `-rw-r--r-- 1 lhc lhc 2389 1月  30 19:07 012.binary_search_tree.c` 
      2. linux中文件名限制：
         1. 单个文件或目录的名称不能超过255个字符
         2. 文件名中不能包含特殊字符（如/，.，-，+等）
      3. 第一位：文件类型，采用`file`命令查看linux中文件类型
         1. `-` 代表普通文件（file）
            1. 纯文本文件（ASCII）：配置文件
            2. 二进制文件（binary file）：命令
            3. 数据格式文件（data）：/var/log/wtmp
         2. `d` 代表目录（directory）
         3. `b` 代表块设备（block），如硬盘，U盘等（`/dev下`）
         4. `c` 字符集设备（char）：如键盘等，一次性按顺序读取`/dev下`
            1. `s` 套接字文件（socket），通常用在网络上数据连接`IP：PORT` 
            2. 例如：`www.baidu.com`中先将`baidu`转为IP，默认端口80，则套接字为`www.baidu.com:80`
         5. `p` 命名管道（pipe）:特殊的文件类型，解决多个程序同时访问一个文件所造成的错误问题
         6. `l` 符号连接文件（symbolic link file）：软链接文件
      4. 第二位到第十位：权限位（rwx：读写执行）
         1. 234位：文件属主权限（owner）
         2. 567位：文件属组权限（group）
         3. 8910位：其他用户权限（other）
      5. 1：代表文件硬链接的次数
      6. 第一个lhc：代表文件属主（owner）
      7. 第二个lhc：代表文件属组（group）
      8. 2389：文件大小
      9. `1月 30 19:07`  文件最后被访问的时间戳
         1. `stat` 命令查看文件时间戳
         2. 文件的时间戳：
            1. access：访问的时间戳
            2. Modify：文件被修改的时间戳（修改文件数据：添加删除数据等）
            3. change：文件被更改时间戳（更改文件属性）
   2. `-h` ：为文件大小添加单位
   3. `-a` ：显示目录下所有文件（包括.， ..，以.开头的隐藏文件）
   4. `-A` ：和`-a` 相同，但不显示`.` 和 `..`
   5. `-R` ：递归显示目录中的内容（一并显示子目录中的所有内容）
   6. `-r` ：逆序显示目录下内容
   7. `-i` ：显示文件所在的inode节点（index node）

7. ###### 环境变量：内存中的命名空间

   1. PATH变量：存放系统命名路径，以冒号隔开
   2. 查看PATH变量：echo $PATH（Linux命令严格区分大小写）
   3. `lhc@lhc-PC:~$ echo $PATH /usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin`
      1. 如果在以上路径中没有找到相关命令（该命令为外部命令），提示用户command not found 
      2. 如果一个命令在以上多个路径中存在，系统会按照从前往后的顺序查找，查找到该命令后，后面的路径则不再查找
   4. `hash` ：查看命令缓存及命中率（使用次数）

8. ###### Linux命令的帮助信息

   1. 内部命令：采用`help` 命令查看
   2. 外部命令：`[command] --help`
   3. **man**手册（命令的使用说明书）
      1. 语法：`man ls `
      2. man查看内部命令时，显示的是bash帮助信息，内部命令一般用type查看
      3. 可以用上下方向键翻行
      4. enter向下翻行
      5. pagedown：向下翻页
      6. pageup：向上翻页
      7. `/word` ：从上向下查找关键字
      8. `？word` ：从下向上查找关键字
      9. `q` ：退出当前帮助信息
      10. man八目录说明：
          1. `User Command`：普通用户命令（`/usr/local/bin:/usr/bin:/bin`等binary文件中的都是普通用户命令）可执行程序或shell命令
          2. `System Calls`：系统调用库（内核提供的函数）
          3. `C Library Functions`：库调用（程序库中的函数）
          4. `Devices and Special Files`：设备或特殊文件（硬件设备，(通常位于`/dev`)
          5. File Formats and Conventions：查看配置文件格式（如`/etc/passwd`）
          6. Games et. Al.：游戏
          7. Miscellanea：杂项
          8. System Administration tools and Deamons：系统管理员的工具，管理命令（`/sbin:/usr/sbin`等sbin：secret binary文件）
      11. man使用说明：
          1. NAME：命令名称及简要用法
          2. SYNOPSIS：语法格式，可能要包括一些选项的使用
          3. DESCRIPTION：命令和命令选项的一些说明
          4. Exit status：退出状态码
          5. AUTHOR：作者信息
          6. REPORTING BUGS（BUG）：发现BUG时如何反馈信息
          7. COPYRIGHT：另外参照的帮助信息
          8. SEE ALSO：另外参照的帮助信息
          9. OPTIONS：说明该命令每一个选项的详细用法
          10. EXAMPLES：使用实例
      12. man手册目录路径：`/usr/shared/doc`  工作中主要查看内核信息
          1. <>：必须使用的选项或参数
          2. []：选用的选项或参数
          3. ...：可以使用多个选项或参数
          4. |：代表多选一
          5. {}：分组，没有特殊意义
   4. info：查看帮助信息，更注重于linux的历史

9. ######  `cd ：change directory`：切换目录

   1. `cd`：不加选项，返回到当前用户的宿主目录
   2. `cd -`：返回到上次工作的路径
   3. `~username`：切换到username的宿主目录

10. ###### `which`查看

11. ###### `whatis` ：查看命令所在的帮助信息目录，该命令在系统启动大约70分钟后生成whatis的数据库，如果时间太短，该命令不回去执行，我们可以使用makewhatis初始化该命令

12. ###### `useradd` ：建立用户

#### Linux的根文件系统

1. Linux文件系统FHS（Filesystem Hierarchy Standard）标准：希望用户可以了解已经安装的程序在哪个目录下

2. 根文件文件系统（/）：rootfs：root filesystem

   1. `/bin`：二进制，存放命令，大部分和开机命令相关
   2. `/boot`：存放启动和内核相关的文件
   3. `/dev`：存放设备文件
   4. `/etc`：存放应用程序的配置文件
   5. `/home`：普通用户的宿主目录，默认为`/home/username`
   6. `/lib和/lib64`：存放系统开机时需要用的函数库及运行`/bin`和`/sbin`命令调用的函数库
      1. `/lib/modules`：存放内核相关的模块（驱动程序等）
   7. `/media和/mnt`：挂载点，`/media`挂载移动设备，`/mnt`挂载临时设备
   8. `/opt`：第三方软件存放目录（用户自行安装的软件存放处），现在一般安装到`/usr/local `
   9. `/proc`：伪文件系统，存放数据、 关于进程（以数字命名）相关的信息，存放网络状态等，以后调优可能会用到
   10. `/root`：管理员的家目录
   11. `/sbin`：存放管理员使用的命令（安全的二进制命令）
   12. `/srv`：service缩写，存放服务数据的目录，如可以把www服务的网页存放到该目录
   13. `/tmp`：存放临时文件，所有用户都可以访问创建文件，但是每个用户只能删除自己的文件，大概系统一个月自动清空一次
   14. `/sys`：伪文件系统，记录内核相关的信息，包括目前加载的内核模块以及内核检测到的硬件设备等
   15. `/usr`：UNIX Software Resource：存放安装的应用程序
       1. `/usr/bin`：普通用户使用的命令（和/bin区别是是否与开机有关）
       2. `/usr/sbin`：网络服务器命令
       3. `/usr/lib`和`/usr/lib64`：包含各种应用程序函数库
       4. `/usr/share`：存放共享文件目录（在线帮助文件，杂项，时区文件等）
       5. `/usr/include`：存放语言头文件，安装软件的头文件
       6. `/usr/src`：编译安装以后释放源代码目录
   16. `/var`：vary的缩写，存放经常变动的文件，比如日志，mail等
       1. `/var/cache`：应用程序运行时产生的缓存文件
       2. `/var/lib`：程序本身运行时需要数据文件的存放目录，比如mysql运行时的文件
       3. `/var/lock`：存放运行时的某些设备或资源一次只能被一个应用程序使用，如果多个应用使用会产生错误，存放锁文件，为设备或资源上锁
       4. `/var/log`：存放系统日志目录（系统、用户登录、服务日志等）
       5. `/var/mail`：存放个人电子邮件（系统报警产生的邮件信息等）
       6. `/var/run`：存放应用程序运行时的PID文件（进程号.pid结尾）
       7. `/var/spool`：存放队列数据，排队等待其他应用程序使用的数据，这些数据通常情况下使用完成后会被删除

3. FHS规定：`/etc, /bin, /dev, /lib, /sbin`五个目录必须要个根目录位于同一文件系统

4. `file`：查看文件类型（windows中用拓展名识别文件类型）

   1. 语法：`file [options][args]`
   2. `-b`：显示结果时，不显示文件名
   3. `-c`：显示执行file命令的的执行过程（去判断file命令是如何判断文件类型的，便于排错或分析file执行过程）
   4. `-i`：输出MIME类型的字符串 
   5. `-z`：显示压缩文件的内容
   6. `-L`：查看软链接的文件内容
   7. `-f`：查看文件中文件名的类型

5. `cat`：一次性查看整个文件，从键盘输入创建一个新文件

   1. 语法：`cat [options][args]`

   2. 从键盘输入创建一个新文件：

      1. 新建新文件

         ```shell
         cat >new_file_name << EOF  //EOF:end of file
         ```

      2. 向现有文件中追加数据：

         ```shell
         cat >> test.txt << eof
         ```

      3. 把多个文件合并到一个文件输出

         ```shell
         cat file1 file2 > file
         ```

   3. `-n`：显示文件内容时同时显示行号，包括空行

   4. `-b`：显示文件内容时显示行号，但不包括空行

   5. `-S`：当文件中有多个空行时，合并为一个空行

   6. `-E`：在显示内容时，结尾添加$符号

6. `cp` 























# 鸟哥的LINUX私房菜

1. 计算器：输入->处理->输出
2. 输入->主存储器->CPU->输出
3. 

